// weeks/week_6_lessons.dart
import '../lesson_model.dart';

/// Week 6: Relapse Prevention
class Week6Lessons {
  static List<Lesson> getLessons() {
    return [
      Lesson(
        id: 'w6d1',
        week: 6,
        day: 1,
        title: 'High-Risk Situations',
        subtitle: 'Knowing your danger zones',
        content: '''
High-risk situations are times, places, or circumstances where you're most vulnerable to relapse.

Identifying these in advance allows you to prepare or avoid them entirely.

The PIE Model:
High-risk situations often involve one or more of these elements:

People: Who you're with
• Old using friends
• People who pressure you
• Toxic relationships
• Enablers

Indifference (or Isolation): When you stop caring
• Feeling hopeless about recovery
• Isolating from support
• Skipping meetings or therapy
• Neglecting self-care

Emotions: What you're feeling
• Overwhelming stress
• Intense anger or resentment
• Deep sadness or loneliness
• Boredom or restlessness

Common High-Risk Situations:
• Social events where substances are present
• Being alone for long periods
• Stressful life events (job loss, breakup, conflict)
• Anniversaries of traumatic events
• Success or celebration (yes, positive events can be high-risk too)

Your Personal Danger Zones:
Everyone's high-risk situations are different. What's dangerous for you might be safe for someone else.

You need to identify YOUR specific vulnerabilities.

The more specific you can be, the better you can prepare.
''',
        keyPoints: [
          'High-risk situations make you vulnerable to relapse',
          'The PIE model: People, Indifference, Emotions',
          'Common triggers include social events, isolation, stress, and even success',
          'Identify your personal danger zones to prepare effectively',
        ],
        reflectionQuestions: [
          ReflectionQuestion(
            question: 'What are your top 3 high-risk situations?',
            hint: 'Be specific—who, what, where, when',
          ),
          ReflectionQuestion(
            question: 'Which of the PIE elements is most dangerous for you?',
            hint: 'People, Indifference/Isolation, or Emotions',
          ),
          ReflectionQuestion(
            question: 'What is one high-risk situation you can avoid entirely?',
            hint: 'What boundary do you need to set?',
          ),
        ],
        estimatedMinutes: 12,
      ),
      Lesson(
        id: 'w6d2',
        week: 6,
        day: 2,
        title: 'Warning Signs of Relapse',
        subtitle: 'Catching the process early',
        content: '''
Relapse is not an event—it's a process. It doesn't start when you use. It starts days, weeks, or even months before.

Learning to recognize early warning signs gives you a chance to intervene before it's too late.

Early Warning Signs:
These happen first and are easiest to address.
• Skipping meetings or therapy
• Isolating from support
• Romanticizing past substance use
• Neglecting self-care (sleep, nutrition, hygiene)
• Increased stress with no coping plan

Middle Warning Signs:
These indicate you're sliding toward relapse.
• Rationalizing or bargaining ("Just this once," "I can handle it")
• Revisiting old people or places
• Increased irritability or mood swings
• Loss of structure or routine
• Dishonesty with yourself or others

Late Warning Signs:
These mean relapse is imminent.
• Seeking out substances or opportunities to use
• Actively planning to use
• Convincing yourself recovery isn't worth it
• Feeling hopeless or defeated
• Cutting off all support

The Relapse Process:
Emotional Relapse → Mental Relapse → Physical Relapse

You can stop the process at any stage. The earlier you catch it, the easier it is to course-correct.

Self-Awareness Is Protection:
The more aware you are of your warning signs, the more power you have to stop the slide.
''',
        keyPoints: [
          'Relapse is a process, not a single event',
          'Early warning signs include isolation, skipping support, neglecting self-care',
          'Late warning signs include seeking substances and cutting off support',
          'Catching warning signs early makes intervention easier',
        ],
        reflectionQuestions: [
          ReflectionQuestion(
            question: 'What are your personal early warning signs?',
            hint: 'What happens first when you start to slide?',
          ),
          ReflectionQuestion(
            question: 'Have you experienced any warning signs recently?',
            hint: 'Be honest with yourself',
          ),
          ReflectionQuestion(
            question: 'Who can you tell when you notice warning signs?',
            hint: 'Accountability person, therapist, sponsor, friend',
          ),
        ],
        estimatedMinutes: 13,
      ),
      Lesson(
        id: 'w6d3',
        week: 6,
        day: 3,
        title: 'Creating Your Prevention Plan',
        subtitle: 'Your roadmap for high-risk moments',
        content: '''
A relapse prevention plan is a written document that outlines your triggers, coping strategies, support network, and action steps.

It's your roadmap for navigating high-risk situations.

What a Prevention Plan Includes:
1. Personal Triggers
   • Internal (emotions, thoughts, physical states)
   • External (people, places, things)

2. Warning Signs
   • Early, middle, and late indicators of relapse risk

3. Coping Strategies
   • What you'll do when triggered or struggling
   • Specific, realistic actions

4. Support Network
   • Who you can call or reach out to
   • Contact information readily available

5. Emergency Actions
   • What to do in a crisis
   • Hotlines, therapists, emergency contacts

Making It Concrete and Accessible:
Your prevention plan should be written down and easily accessible. Keep it in your phone, on your fridge, or in your wallet.

When you're in crisis, you won't be thinking clearly. You need a plan you can follow step-by-step.

Use the Prevention Plan Builder Tool:
This app has a built-in tool to create and save your prevention plan. Use it to document everything in one place.

Review and Update Regularly:
Your triggers and warning signs may change over time. Review your plan every few months and update as needed.
''',
        keyPoints: [
          'A prevention plan outlines triggers, warning signs, coping, and support',
          'It should be written, specific, and easily accessible',
          'Use the Prevention Plan Builder tool in this app',
          'Review and update your plan regularly',
        ],
        reflectionQuestions: [
          ReflectionQuestion(
            question: 'Have you created a relapse prevention plan yet?',
            hint: 'If not, commit to doing it this week',
          ),
          ReflectionQuestion(
            question: 'Who is in your support network that you can call in a crisis?',
            hint: 'List at least 3 people with contact info',
          ),
          ReflectionQuestion(
            question: 'What is your emergency action plan if you\'re about to relapse?',
            hint: 'Specific steps: call X, go to Y, do Z',
          ),
        ],
        estimatedMinutes: 14,
      ),
      Lesson(
        id: 'w6d4',
        week: 6,
        day: 4,
        title: 'What to Do After a Slip',
        subtitle: 'Getting back on track quickly',
        content: '''
A slip (also called a lapse) is a brief return to substance use. A relapse is a full return to regular use.

The difference between the two is what you do next.

Lapse vs. Relapse:
• Lapse: One use, followed by immediate return to recovery
• Relapse: Continued use, giving up on recovery

A lapse doesn't have to become a relapse. What you do in the hours and days after a slip determines the outcome.

If You Slip:
1. Stop immediately. Don't use again.
2. Tell someone. Secrets fuel relapse. Honesty invites support.
3. Identify what led to the slip. What triggered it? What warning signs did you miss?
4. Adjust your plan. What needs to change to prevent this from happening again?
5. Recommit to recovery. One mistake does not erase your progress.

Avoid the Abstinence Violation Effect:
This is the belief that one slip means total failure. It leads to the thought: "I already messed up, so I might as well keep using."

This is all-or-nothing thinking at its most dangerous.

The Truth:
A slip is a setback, not the end. You can learn from it and keep moving forward.

Self-Compassion After a Slip:
Shame makes relapse more likely. Compassion makes recovery more likely.

Treat yourself the way you'd treat someone you love who made a mistake.
''',
        keyPoints: [
          'A lapse is a brief return to use; a relapse is continued use',
          'What you do after a slip determines whether it becomes a relapse',
          'Tell someone, identify triggers, adjust your plan, recommit',
          'Avoid the abstinence violation effect (all-or-nothing thinking)',
        ],
        reflectionQuestions: [
          ReflectionQuestion(
            question: 'If you were to slip, who would you tell immediately?',
            hint: 'Make this decision now, not in the moment',
          ),
          ReflectionQuestion(
            question: 'What would you need to hear from yourself after a slip?',
            hint: 'Compassionate, non-judgmental, forward-focused',
          ),
          ReflectionQuestion(
            question: 'What have you learned from past lapses or relapses?',
            hint: 'What patterns or triggers did you notice?',
          ),
        ],
        estimatedMinutes: 13,
      ),
      Lesson(
        id: 'w6d5',
        week: 6,
        day: 5,
        title: 'Building Long-Term Resilience',
        subtitle: 'Strengthening your foundation',
        content: '''
Resilience is the ability to bounce back from stress, setbacks, and challenges without using substances.

It's what keeps you sober through hard times.

Protective Factors in Recovery:
These are things that reduce your relapse risk.
• Strong support network
• Consistent structure and routine
• Healthy coping strategies
• Meaningful purpose or goals
• Physical health (sleep, nutrition, exercise)
• Mental health treatment
• Financial stability
• Safe living environment

Risk Factors:
These are things that increase relapse vulnerability.
• Isolation and loneliness
• Untreated mental health conditions
• Chaotic or unstable environment
• Lack of purpose or meaning
• Poor physical health
• Unresolved trauma
• Financial stress

Building Resilience:
You build resilience by increasing protective factors and reducing risk factors.

This doesn't happen overnight. It's a long-term process of creating a life that supports recovery.

Small Changes, Big Impact:
You don't have to overhaul your entire life at once. Small, consistent changes add up.
• Add one new coping skill
• Strengthen one relationship
• Improve one area of self-care
• Set one meaningful goal

Resilience Is Not Perfection:
Resilient people still struggle. They still have hard days. The difference is they don't give up.

Resilience is getting back up after you fall.
''',
        keyPoints: [
          'Resilience is bouncing back from challenges without using',
          'Protective factors reduce relapse risk; risk factors increase it',
          'Build resilience by strengthening support, health, and purpose',
          'Small, consistent changes create long-term resilience',
        ],
        reflectionQuestions: [
          ReflectionQuestion(
            question: 'What are your current protective factors?',
            hint: 'What\'s already working in your favor?',
          ),
          ReflectionQuestion(
            question: 'What is one risk factor you need to address?',
            hint: 'Isolation, mental health, instability, lack of purpose',
          ),
          ReflectionQuestion(
            question: 'What is one small change you can make this week to build resilience?',
            hint: 'Realistic, specific, achievable',
          ),
        ],
        estimatedMinutes: 12,
      ),
    ];
  }
}